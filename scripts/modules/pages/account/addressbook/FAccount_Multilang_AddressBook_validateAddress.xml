<?xml version="1.0" encoding="UTF-8"?>
<scriptmodule xmlns="http://xlt.xceptance.com/xlt-script/2" version="7">
  <description>Validate address.</description>
  <parameter name="position" desc="position"/>
  <parameter name="title" desc="title"/>
  <parameter name="firstname" desc="firstname"/>
  <parameter name="lastname" desc="lastname"/>
  <parameter name="address1" desc="address1"/>
  <parameter name="address2" desc="address2"/>
  <parameter name="country" desc="country"/>
  <parameter name="statesState"/>
  <parameter name="statesStateShort" desc="states state short"/>
  <parameter name="city" desc="city"/>
  <parameter name="postalCode" desc="postal code"/>
  <parameter name="phone" desc="phone"/>
  <codecomment>Validate address data</codecomment>
  <command name="store" target="css=#primary #addresses .address-list li:nth-of-type(@{position})" value="css_address"/>
  <command name="waitForText" target="${css_address} .mini-address-title" value="@{title}"/>
  <command name="assertText" target="${css_address} .mini-address-name" value="*@{firstname}*@{lastname}*"/>
  <command name="assertText" target="${css_address} .mini-address-location address" value="@{address1}*"/>
  <command name="assertText" target="${css_address} .mini-address-location address" value="*@{address2}*"/>
  <module name="modules.pages.account.addressbook.VAccount_Multilang_AddressBook_validateCity">
    <condition>'${Site}' == 'GB'</condition>
    <parameter name="position" value="@{position}"/>
    <parameter name="city" value="@{city}"/>
    <parameter name="statesState" value="@{statesState}"/>
    <parameter name="postalCode" value="@{postalCode}"/>
  </module>
  <module name="modules.pages.account.addressbook.VAccount_Multilang_AddressBook_validateCity">
    <condition>'${Site}' == 'US'</condition>
    <parameter name="position" value="@{position}"/>
    <parameter name="city" value="@{city}"/>
    <parameter name="statesState" value="@{statesStateShort}"/>
    <parameter name="postalCode" value="@{postalCode}"/>
  </module>
  <command name="assertText" target="${css_address} .mini-address-location address" value="*@{country}*"/>
  <command name="assertText" target="${css_address} .mini-address-location address" value="*@{phone}*"/>
</scriptmodule>