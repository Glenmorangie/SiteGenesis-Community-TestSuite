<?xml version="1.0" encoding="UTF-8"?>
<testcase xmlns="http://xlt.xceptance.com/xlt-script/2" version="6" junit-test="true">
  <tags>smoke</tags>
  <description>Test select, remove and clear color refinement on catalog page.

# 1. Setup and preparation

- Start session, open homepage and delete all visible cookies

# 2. Scope of test

- Browse to category
- Select, validate and remove color via name
- Select three colors via position
- Remove one color via breadcrumb
- Remove two colors clear
- Validate empty color list
- Validate empty refinement list in breadcrumbs

# 3. Clean up

- End session and clean up created cookies
</description>
  <codecomment># Setup

- Start session</codecomment>
  <module name="modules.helper.FHelper_Session_flowToStartSession"/>
  <codecomment># Scope</codecomment>
  <codecomment>## Catalog

- Go to catalog page
- Validate page</codecomment>
  <action name="GoToCategoryPage"/>
  <module name="modules.global.headerfooternav.MGlobal_Nav_clickGoToCategoryLevel3">
    <parameter name="positionLevel1" value="2"/>
    <parameter name="positionLevel2" value="1"/>
    <parameter name="positionLevel3" value="2"/>
  </module>
  <module name="modules.pages.catalog.VCatalog_validatePage"/>
  <codecomment>## Catalog

- Select color by clicking
- Valdiate color selected
- Unselect color by clicking again
- Validate color unselected</codecomment>
  <action name="RefinePriceByTitle"/>
  <module name="modules.pages.catalog.MCatalog_Refinement_clickPriceByTitle">
    <parameter name="title" value="${priceTitle01}"/>
  </module>
  <module name="modules.pages.catalog.VCatalog_Refinement_validatePriceInBreadcrumb">
    <parameter name="title" value="${priceTitle01}"/>
  </module>
  <action name="RemovePrice"/>
  <module name="modules.pages.catalog.MCatalog_Refinements_removeSelectedPrice"/>
  <codecomment>## Catalog

- Select three random colors
- Valdiate colors</codecomment>
  <action name="RefinePriceByTitle"/>
  <module name="modules.pages.catalog.MCatalog_Refinement_clickPriceByTitle">
    <parameter name="title" value="${priceTitle02}"/>
  </module>
  <module name="modules.pages.catalog.VCatalog_Refinement_validatePriceInBreadcrumb">
    <parameter name="title" value="${priceTitle02}"/>
  </module>
  <action name="RefineColorByPostion"/>
  <module name="modules.pages.catalog.MCatalog_Refinement_clickPriceByTitle">
    <parameter name="title" value="${priceTitle03}"/>
  </module>
  <module name="modules.pages.catalog.VCatalog_Refinement_validatePriceInBreadcrumb">
    <parameter name="title" value="${priceTitle03}"/>
  </module>
  <action name="RefineColorByPostion"/>
  <module name="modules.pages.catalog.MCatalog_Refinement_clickPriceByTitle">
    <parameter name="title" value="${priceTitle04}"/>
  </module>
  <module name="modules.pages.catalog.VCatalog_Refinement_validatePriceInBreadcrumb">
    <parameter name="title" value="${priceTitle04}"/>
  </module>
  <codecomment>## Catalog

- Remove filter by breadcrumb position
- Validate color is unselected
- Clear all color list
- Validate color list is empty
- Validate refinement list is empty</codecomment>
  <action name="RemoveFilter"/>
  <module name="modules.pages.catalog.MCatalog_Refinements_removeSelectedPrice"/>
  <action name="ClearColors"/>
  <module name="modules.pages.catalog.MCatalog_Refinement_clickPriceByTitle">
    <parameter name="title" value="${priceTitle04}"/>
  </module>
  <command name="click" target="css=#secondary.refinements div.refinement  .clear-refinement a"/>
  <command name="waitForNotClass" target="css=#secondary.refinements div:nth-of-type(5) ul li " value="selected"/>
</testcase>