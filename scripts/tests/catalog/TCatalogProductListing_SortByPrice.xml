<?xml version="1.0" encoding="UTF-8"?>
<testcase xmlns="http://xlt.xceptance.com/xlt-script/2" version="6">
  <description>Test validate the Sort By Price Rule

# 1. Setup and preparation

- Start session, open homepage and delete all visible cookies
- search for a product set
- show all results on one page

# 2. Scope of test

- Sort By Price - low to high
- validate that the first price is smaller than the second one
- validate that the penultimate price is smaller than the last one
- validate that the second price is smaller than the penultimate

- Sort By Price - High To Low
- validate that Highest Price is now the first one
- validate that smalles price is now the last one

- Sort By Price - Low To High
- validat that highest price is the last one and lowest is the first one </description>
  <codecomment># Setup

- Start session
- Search
- Select page</codecomment>
  <module name="modules.helper.FHelper_Session_flowToStartSession"/>
  <action name="Search"/>
  <module name="modules.pages.search.MSearch_enterTextAndSubmit">
    <parameter name="searchText" value="${searchPhrase}"/>
  </module>
  <action name="SelectPageRandomly"/>
  <module name="modules.pages.catalog.MCatalog_Option_selectItemsPerPageRandomly">
    <parameter name="itemsPerPageLabel_varName" value="itemsPerPageLabel_varDynamic"/>
  </module>
  <codecomment># Scope</codecomment>
  <codecomment>Sort by price low to high and validate order</codecomment>
  <action name="SelectSortByPriceLowToHigh"/>
  <module name="modules.pages.catalog.MCatalog_Option_selectSortByByLabel">
    <parameter name="sortByLabel" value="Price Low To High"/>
  </module>
  <module name="modules.helper.JHelper_ProductGrid_validateSortBy">
    <parameter name="xpath" value="${xpathProductGridPrices}"/>
    <parameter name="sortOrder" value="asc"/>
    <parameter name="substringBeforeLowerBoundary" value="${storefront_priceCurrency}"/>
    <parameter name="substringBeforeUpperBoundary" value="${storefront_priceRangeSeparators}"/>
  </module>
  <codecomment>Sort by price high to low and validate order</codecomment>
  <action name="SelectSortByPriceHighToLow"/>
  <module name="modules.pages.catalog.MCatalog_Option_selectSortByByLabel">
    <parameter name="sortByLabel" value="Price High To Low"/>
  </module>
  <module name="modules.helper.JHelper_ProductGrid_validateSortBy">
    <parameter name="xpath" value="${xpathProductGridPrices}"/>
    <parameter name="sortOrder" value="desc"/>
    <parameter name="substringBeforeLowerBoundary" value="${storefront_priceCurrency}"/>
    <parameter name="substringBeforeUpperBoundary" value="${storefront_priceRangeSeparators}"/>
  </module>
</testcase>