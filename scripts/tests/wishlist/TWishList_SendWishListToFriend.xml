<?xml version="1.0" encoding="UTF-8"?>
<testcase xmlns="http://xlt.xceptance.com/xlt-script/2" version="6" junit-test="true">
  <tags>smoke</tags>
  <description>Test add product to wishlist.

# 1. Setup and preparation

- Start session, open homepage and delete all visible cookies
- Create new account
- Search product 01

# 2. Scope of test

- add product to wishlist
- click send to friend 
- cancel form
- click send to friend
- click preview

</description>
  <codecomment># Setup

- Create mail for User and Searcher
- Create password for User and Searcher
- Start session
- Create account
- add product to wishlist</codecomment>
  <module name="modules.helper.MHelper_Random_createEmail">
    <parameter name="email_varName" value="email_sender"/>
  </module>
  <module name="modules.helper.MHelper_Random_createPassword">
    <parameter name="password_varName" value="password_sender"/>
  </module>
  <module name="modules.helper.MHelper_Random_createEmail">
    <parameter name="email_varName" value="email_receiver"/>
  </module>
  <module name="modules.helper.FHelper_Session_flowToStartSession"/>
  <module name="modules.pages.homepage.FHomepage_flowToCreateNewAccountWithoutLogout">
    <parameter name="firstname" value="${firstName_sender}"/>
    <parameter name="lastname" value="${lastName_sender}"/>
    <parameter name="email" value="${email_sender}"/>
    <parameter name="password" value="${password_sender}"/>
  </module>
  <action name="Search"/>
  <module name="modules.pages.search.MSearch_enterTextAndSubmit">
    <parameter name="searchText" value="${productNumber}"/>
  </module>
  <action name="AddToWishList"/>
  <module name="modules.pages.product.MProduct_storeBasicData">
    <parameter name="productName_varName" value="productName_varDynamic"/>
    <parameter name="productNumber_varName" value="productNumber_varDynamic"/>
    <parameter name="productPriceSales_varName" value="productPriceSales_varDynamic"/>
  </module>
  <module name="modules.pages.product.MProduct_storeQuantity">
    <parameter name="productQuantity_varName" value="productQuantity_varDynamic"/>
  </module>
  <module name="modules.pages.product.MProduct_clickAddToWishlist"/>
  <codecomment># Scope</codecomment>
  <codecomment>## WishList

- Send to Friend</codecomment>
  <action name="ClickSendToFriend"/>
  <module name="modules.pages.account.wishlist.MWishList_clickSendToFriend"/>
  <action name="ClickCancel"/>
  <command name="click" target="css=#send-to-friend-main fieldset div button.cancel"/>
  <command name="waitForNotVisible" target="id=send-to-friend-dialog"/>
  <action name="ClickSendToFriend"/>
  <module name="modules.pages.account.wishlist.MWishList_clickSendToFriend"/>
  <command name="type" target="id=dwfrm_sendtofriend_friendsname" value="${firstName_receiver}"/>
  <command name="type" target="id=dwfrm_sendtofriend_friendsemail" value="${email_receiver}"/>
  <command name="type" target="id=dwfrm_sendtofriend_confirmfriendsemail" value="${email_receiver}"/>
  <command name="type" target="id=dwfrm_sendtofriend_message" value="Take a look into my wishlist"/>
  <action name="ClickPreview"/>
  <command name="click" target="css=#send-to-friend-main fieldset div button.preview-button"/>
  <command name="waitForText" target="css=#send-to-friend-main fieldset h2" value="Review Your Message"/>
  <command name="assertText" target="css=#send-to-friend-main fieldset p" value="Once you have reviewed your message you can edit or send by clicking the buttons below"/>
  <command name="assertElementPresent" target="css=#send-to-friend-main fieldset div.send-to-friend-product"/>
  <command name="assertText" target="css=#send-to-friend-main fieldset div.send-to-friend-product dd:nth-of-type(1)" value="${firstName_receiver}*${email_receiver}"/>
  <command name="assertText" target="css=#send-to-friend-main fieldset div.send-to-friend-product dd:nth-of-type(2)" value="${firstName_sender}*${lastName_sender}*${email_sender}"/>
  <action name="ClickSend"/>
  <command name="click" target="css=#send-to-friend-form div button.send-button"/>
  <command name="waitForText" target="css=#send-to-friend-dialog.dialog-content.ui-dialog-content.ui-widget-content h2 " value="Your message has been sent."/>
  <action name="ClickClose"/>
  <command name="click" target="css=#send-to-friend-dialog button.close-button"/>
  <command name="waitForNotVisible" target="id=send-to-friend-dialog"/>
  <action name="ClickSendToFriend"/>
  <module name="modules.pages.account.wishlist.MWishList_clickSendToFriend"/>
  <command name="type" target="id=dwfrm_sendtofriend_friendsname" value="${firstName_receiver}"/>
  <command name="type" target="id=dwfrm_sendtofriend_friendsemail" value="${email_receiver}"/>
  <command name="type" target="id=dwfrm_sendtofriend_confirmfriendsemail" value="${email_receiver}"/>
  <command name="type" target="id=dwfrm_sendtofriend_message" value="Take a look into my wishlist"/>
  <action name="ClickSend"/>
  <command name="click" target="css=#send-to-friend-main fieldset div button.send-button"/>
  <command name="waitForText" target="css=#send-to-friend-dialog.dialog-content.ui-dialog-content.ui-widget-content h2 " value="Your message has been sent."/>
  <action name="ClickClose"/>
  <command name="click" target="css=#send-to-friend-dialog button.close-button"/>
  <command name="waitForNotVisible" target="id=send-to-friend-dialog"/>
  <codecomment>Logout</codecomment>
  <module name="modules.global.headerfooternav.FGlobal_flowToLogout"/>
</testcase>