<?xml version="1.0" encoding="UTF-8"?>
<testcase xmlns="http://xlt.xceptance.com/xlt-script/2" version="6" junit-test="true">
  <tags>wishlist</tags>
  <description>Opens Wishlist Link of a public and a non public list

# 1. Setup and preparation
- create sender email
- create sender account password
- start session
- create a new account but do not log out

- search product

# 2. Scope of test
-  add product to wishlist and store wishlistl ink
- open linke without making list public
- and open wishlist link with make list public</description>
  <codecomment># Setup

- Start session
- Create accounts for wishlist owner and searcher
- Add products to owners wishlist
- Logout</codecomment>
  <module name="modules.helper.FHelper_Session_flowToStartSession"/>
  <codecomment>Create accounts for wishlist owner and searcher</codecomment>
  <module name="modules.pages.homepage.FHomepage_flowToCreateNewAccountAddRandomness">
    <parameter name="firstname" value="${wishlistOwner_fristname}"/>
    <parameter name="lastname" value="${wishlistOwner_lastname}"/>
    <parameter name="firstname_varName" value="wishlistOwner_fristname_varDynamic"/>
    <parameter name="lastname_varName" value="wishlistOwner_lastname_varDynamic"/>
    <parameter name="email_varName" value="wishlistOwner_email_varDynamic"/>
    <parameter name="password_varName" value="wishlistOwner_password_varDynamic"/>
  </module>
  <codecomment>Add product to owners wishlist</codecomment>
  <module name="modules.pages.homepage.FHomepage_flowToLoginAccount">
    <parameter name="email" value="${wishlistOwner_email_varDynamic}"/>
    <parameter name="password" value="${wishlistOwner_password_varDynamic}"/>
  </module>
  <module name="modules.pages.account.myaccount.VAccount_MyAccount_validateCustomerName">
    <parameter name="firstname" value="${wishlistOwner_fristname_varDynamic}"/>
    <parameter name="lastname" value="${wishlistOwner_lastname_varDynamic}"/>
  </module>
  <module name="modules.pages.search.FSearch_flowToAddProductToWishList">
    <parameter name="wishlistRow" value="1"/>
    <parameter name="searchText" value="${searchTextProducts_01}"/>
    <parameter name="productQuantity" value="1"/>
    <parameter name="productName_varName" value="productName_01_varDynamic"/>
    <parameter name="productNumber_varName" value="productNumber_01_varDynamic"/>
    <parameter name="productQuantity_varName" value="productQuantity_01_varDynamic"/>
    <parameter name="productPriceSales_varName" value="productPriceSales_01_varDynamic"/>
  </module>
  <codecomment># Setup

- Create mail for User and Searcher
- Create password for User and Searcher
- Start session
- Create account
- add product to wishlist</codecomment>
  <module name="modules.helper.MHelper_Random_createPassword" disabled="true">
    <parameter name="password_varName" value="password_sender"/>
  </module>
  <module name="modules.helper.MHelper_Random_createEmail" disabled="true">
    <parameter name="email_varName" value="email_sender"/>
  </module>
  <module name="modules.helper.MHelper_Random_addRandomness" disabled="true">
    <parameter name="inputString" value="${firstName_sender}"/>
    <parameter name="returned_varString" value="firstName_sender"/>
  </module>
  <module name="modules.helper.MHelper_Random_addRandomness" disabled="true">
    <parameter name="inputString" value="${lastName_sender}"/>
    <parameter name="returned_varString" value="lastName_sender"/>
  </module>
  <module name="modules.helper.FHelper_Session_flowToStartSession" disabled="true"/>
  <module name="modules.pages.homepage.FHomepage_flowToCreateNewAccountWithoutLogout" disabled="true">
    <parameter name="firstname" value="${firstName_sender}"/>
    <parameter name="lastname" value="${lastName_sender}"/>
    <parameter name="email" value="${email_sender}"/>
    <parameter name="password" value="${password_sender}"/>
  </module>
  <action name="Search" disabled="true"/>
  <module name="modules.pages.search.MSearch_enterTextAndSubmit" disabled="true">
    <parameter name="searchText" value="${productNumber}"/>
  </module>
  <module name="modules.pages.product.MProduct_storeBasicData" disabled="true">
    <parameter name="productName_varName" value="productName"/>
    <parameter name="productNumber_varName" value="productNumber"/>
    <parameter name="productPriceSales_varName" value="productPriceSales"/>
  </module>
  <module name="modules.pages.product.MProduct_storeQuantity" disabled="true">
    <parameter name="productQuantity_varName" value="productQuantity"/>
  </module>
  <action name="AddToWishList" disabled="true"/>
  <module name="modules.pages.product.MProduct_clickAddToWishlist" disabled="true"/>
  <codecomment># Scope</codecomment>
  <codecomment>## WishList

- Send to Friend</codecomment>
  <action name="ClickSharedLink"/>
  <command name="click" target="css=.share-options .share-icon.share-link i.fa.fa-link"/>
  <command name="waitForElementPresent" target="css=#dwfrm_wishlist_share.list-share div.share-link-content.active"/>
  <command name="storeText" target="css=#dwfrm_wishlist_share.list-share div.share-link-content.active a" value="wishListLink"/>
  <codecomment>Reopen clean site wis deleted cookies</codecomment>
  <module name="modules.helper.FHelper_Session_flowToStartSession"/>
  <action name="OpenWishlistLink"/>
  <codecomment>Changing First and Last Name to uppercase so that they would macht the pattern of a h2 title</codecomment>
  <command name="storeEval" target="&quot;${firstName_sender}&quot;.toUpperCase()" value="FirstName"/>
  <command name="storeEval" target="&quot;${lastName_sender}&quot;.toUpperCase()" value="LastName"/>
  <codecomment>First time opening the wishlist, the wish list is private so nothing should be shown</codecomment>
  <command name="open" value="${wishListLink}"/>
  <codecomment>log In as user tzo make wishlist public</codecomment>
  <module name="modules.pages.account.wishlist.VAccount_WishList_verifyWishListPlain"/>
  <module name="modules.global.headerfooternav.FGlobal_flowToLogin"/>
  <action name="Login"/>
  <module name="modules.pages.account.login.MAccount_Login_enterClickReturningCustomer">
    <parameter name="email" value="${email_sender}"/>
    <parameter name="password" value="${password_sender}"/>
  </module>
  <action name="WishList"/>
  <module name="modules.global.headerfooternav.MGlobal_clickWishListOnUserMenu"/>
  <action name="MakeWishListPublic"/>
  <module name="modules.pages.account.wishlist.MAccount_WishList_clickMakeListPublic"/>
  <codecomment>Reopen clean site wis deleted cookies</codecomment>
  <module name="modules.helper.FHelper_Session_flowToStartSession"/>
  <action name="OpenWishlistLink"/>
  <command name="open" value="${wishListLink}"/>
  <codecomment>Second time opening the wishlist, the wish list is now public and the product can be ssen</codecomment>
  <module name="modules.pages.account.wishlist.VAccount_WishList_verifyWishListPlain"/>
  <module name="modules.pages.account.wishlist.VAccount_WishList_Row_validateProductDetails">
    <parameter name="row" value="1"/>
    <parameter name="productName" value="${productName}"/>
    <parameter name="productNumber" value="${productNumber}"/>
    <parameter name="productQuantity" value="${productQuantity}"/>
    <parameter name="productPriceSales" value="${productPriceSales}"/>
  </module>
</testcase>